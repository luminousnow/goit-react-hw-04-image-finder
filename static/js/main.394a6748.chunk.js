(this["webpackJsonpgoit-react-hw-04-image-finder"]=this["webpackJsonpgoit-react-hw-04-image-finder"]||[]).push([[0],{10:function(e,t,a){e.exports={imageGallery:"ImageGallery_imageGallery__JxcIz",loader:"ImageGallery_loader__1S7gj",idle:"ImageGallery_idle__1YpT-",pending:"ImageGallery_pending__2y4Ca",resolved:"ImageGallery_resolved__19Fwp",rejected:"ImageGallery_rejected__2yKH5"}},12:function(e,t,a){e.exports={overlay:"Modal_overlay__3WapF",modal:"Modal_modal__jkOX7"}},13:function(e,t,a){e.exports={button__box:"Button_button__box__2aBz7",button:"Button_button__3zLPr"}},14:function(e,t,a){e.exports={error__box:"ErrorView_error__box__-DQ3h",errorImg:"ErrorView_errorImg__rDy63"}},15:function(e,t,a){e.exports={imageGalleryItem:"ImageGalleryItem_imageGalleryItem__2ilN6",imageGalleryItem__image:"ImageGalleryItem_imageGalleryItem__image__3LB1L"}},17:function(e,t,a){e.exports={app:"App_app__1xEDg"}},48:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var r=a(1),o=a(0),n=a.n(o),c=a(7),l=a.n(c),i=a(3),s=a(4),m=a(6),u=a(5),g=a(9),h=a(17),d=a.n(h),b=a(8),_=a.n(b),p=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={imgName:""},e.onNameChange=function(t){e.setState({imgName:t.currentTarget.value.toLowerCase()})},e.onSubmitForm=function(t){var a=e.state.imgName;if(t.preventDefault(),""===a.trim())return g.b.error("\u0412\u0435\u0434\u0456\u0442\u044c \u043d\u0430\u0437\u0432\u0443 \u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f");e.props.onSubmit(a)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.onSubmitForm,t=this.onNameChange;return Object(r.jsx)("header",{className:_.a.searchbar,children:Object(r.jsxs)("form",{onSubmit:e,className:_.a.searchForm,children:[Object(r.jsx)("button",{type:"submit",className:_.a.searchForm__button,children:Object(r.jsx)("span",{className:_.a.searchForm__button__label,children:"Search"})}),Object(r.jsx)("input",{value:this.state.imgName,onChange:t,className:_.a.searchForm__input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})}}]),a}(o.Component),j=a(12),f=a.n(j),v=document.querySelector("#modal-root"),O=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).hendleKeyDown=function(t){"Escape"===t.code&&e.props.toggleModal()},e.hendleBackdropClick=function(t){t.currentTarget===t.target&&e.props.toggleModal()},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.hendleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.hendleKeyDown)}},{key:"render",value:function(){var e=this.props,t=e.largeImg,a=e.altImg;return Object(c.createPortal)(Object(r.jsx)("div",{className:f.a.overlay,onClick:this.hendleBackdropClick,children:Object(r.jsx)("div",{className:f.a.modal,children:Object(r.jsx)("img",{src:t,alt:a})})}),v)}}]),a}(o.Component),y=a(16),x=a(18),I=a.n(x);var N=function(e,t){return fetch("".concat("https://pixabay.com/api/","?q=").concat(e,"&page=").concat(t,"&key=").concat("19092084-bc4ccb70eacd908f2d855c18b","&image_type=photo&orientation=horizontal&per_page=").concat(12)).then((function(t){return t.ok?t.json():Promise.reject(new Error("\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0438 \u0441 \u0438\u043c\u0435\u043d\u0435\u043c ".concat(e," \u043e\u0442\u0441\u0443\u0442\u0441\u0432\u0443\u044e\u0442")))}))},w=a(13),C=a.n(w);var k=function(e){var t=e.onLoadMoreBtnClick;return Object(r.jsx)("div",{className:C.a.button__box,children:Object(r.jsx)("button",{onClick:t,className:C.a.button,type:"button",children:"Load more"})})},M=a(14),S=a.n(M),F=a.p+"static/media/omg.939b7921.jpg";var G=function(e){var t=e.errorMessage;return Object(r.jsxs)("div",{role:"alert",className:S.a.error__box,children:[Object(r.jsx)("img",{src:F,alt:"child",width:"320",className:S.a.errorImg}),Object(r.jsxs)("div",{children:[t," "]}),Object(r.jsx)("div",{children:"OMG \u0442\u0430\u043a\u043e\u0433\u043e \u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f \u0432 \u043d\u0430\u0441 \u043d\u0435 \u0437\u043d\u0430\u0439\u0448\u043b\u043e\u0441\u044f"})]})},D=a(10),L=a.n(D),B=a(15),E=a.n(B),z=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.smallImg,t=this.props.largeImg,a=this.props.alt,o=this.props.onClick;return Object(r.jsx)("li",{className:E.a.imageGalleryItem,children:Object(r.jsx)("img",{src:e,"data-original":t,onClick:o,alt:a,className:E.a.imageGalleryItem__image})})}}]),a}(o.Component),A=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={imgCollection:[],pageNum:1,error:null,status:"idle"},e.onLoadMoreBtnClick=function(){e.setState((function(e){return{pageNum:e.pageNum+1}}))},e.onImageClick=function(t){var a=t.target.dataset.original,r=t.target.alt;e.props.getModalData(a,r)},e}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this,r=e.imgName,o=t.pageNum,n=this.props.imgName,c=this.state.pageNum;r!==n&&this.setState({imgCollection:[],pageNum:1}),r===n&&o===c||(this.setState({status:"pending"}),N(n,c).then((function(e){a.setState((function(t){return{imgCollection:[].concat(Object(y.a)(t.imgCollection),Object(y.a)(e.hits)),status:"resolved"}}))})).catch((function(e){return a.setState({error:e,status:"rejected"})}))),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}},{key:"render",value:function(){var e=this.state,t=e.imgCollection,a=e.error,o=e.status,n=this.onLoadMoreBtnClick,c=this.onImageClick;return"idle"===o?Object(r.jsx)("div",{className:L.a.idle,children:"\u0414\u0430\u0432\u0430\u0439\u0442\u0435 \u0440\u043e\u0437\u043f\u043e\u0447\u043d\u0435\u043c\u043e. \u041d\u0430\u043f\u0438\u0448\u0456\u0442\u044c \u043d\u0430\u0437\u0432\u0443 \u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f \u0432 \u043f\u043e\u043b\u0456 \u0432\u0438\u0449\u0435 \u0442\u0430 \u0440\u043e\u0437\u043f\u043e\u0447\u043d\u0456\u0442\u044c \u043f\u043e\u0448\u0443\u043a"}):"pending"===o?Object(r.jsx)(I.a,{className:L.a.loader,type:"Grid",color:"#00BFFF",height:80,width:80}):0===t.length&&"resolved"===o?Object(r.jsx)(G,{}):"resolved"===o?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("ul",{className:L.a.imageGallery,children:t.map((function(e,t){var a=e.webformatURL,o=e.largeImageURL,n=e.tags;return Object(r.jsx)(z,{smallImg:a,largeImg:o,alt:n,onClick:c},t)}))}),t.length>11&&Object(r.jsx)(k,{onLoadMoreBtnClick:n})]}):"rejected"===o?Object(r.jsx)(G,{errorMessage:a.message}):void 0}}]),a}(o.Component),K=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))).state={imgName:"",showModal:!1,lrgImg:"",altImg:""},e.getImgName=function(t){e.setState({imgName:t})},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e.getModalData=function(t,a){e.setState({lrgImg:t,altImg:a,showModal:!0})},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.getImgName,t=this.toggleModal,a=this.getModalData,o=this.state,n=o.imgName,c=o.showModal,l=o.lrgImg,i=o.altImg;return Object(r.jsxs)("div",{className:d.a.app,children:[Object(r.jsx)(g.a,{position:"bottom-center",autoClose:2500}),Object(r.jsx)(p,{onSubmit:e}),Object(r.jsx)(A,{imgName:n,getModalData:a}),c&&Object(r.jsx)(O,{toggleModal:t,largeImg:l,altImg:i})]})}}]),a}(o.Component);a(45),a(46),a(47),a(48);l.a.render(Object(r.jsx)(n.a.StrictMode,{children:Object(r.jsx)(K,{})}),document.getElementById("root"))},8:function(e,t,a){e.exports={searchbar:"Searchbar_searchbar__XzpCb",searchForm:"Searchbar_searchForm__30ahr",searchForm__button:"Searchbar_searchForm__button__1p4t0",searchForm__button__label:"Searchbar_searchForm__button__label__2K3o8",searchForm__input:"Searchbar_searchForm__input__C7-uy"}}},[[49,1,2]]]);
//# sourceMappingURL=main.394a6748.chunk.js.map